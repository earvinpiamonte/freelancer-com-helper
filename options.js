function restore_settings(){var e=$("#cover_letter"),t=$("#convert_url_to_links"),r=$("#remove_banners");chrome.storage.sync.get({coverLetter:"",convertURLtoLinks:!1,removeBanners:!1},function(o){e.val(o.coverLetter),t.prop("checked",o.convertURLtoLinks),r.prop("checked",o.removeBanners);var a=1500-o.coverLetter.length;$("#cover_letter_chars_left").text(a)})}function show_form_alert(e,t){$("#settings-form-alert").removeClass().addClass(e).html(t).show(0).delay(5e3).hide(0)}$(function(){restore_settings();var e=chrome.runtime.getManifest();$(".manifest-version").html(e.version),$(".manifest-author").html(e.author),$('[data-toggle="tooltip"]').tooltip(),$("#btn-close-settings").on("click",function(e){e.preventDefault(),window.close()});$("textarea").keyup(function(){var e=$(this).val().length,t=1500-e;t<0?$("#cover_letter_chars_left").addClass("text-danger"):$("#cover_letter_chars_left").removeClass("text-danger"),$("#cover_letter_chars_left").text(t)}),$("#settings-form").on("submit",function(e){e.preventDefault();var t=$("#cover_letter"),r=$("#convert_url_to_links"),o=$("#remove_banners"),a="alert alert-danger",s='<i class="far fa-times-circle"></i> Your settings was not saved. Please try again.';t.val().length>1500?(a="alert alert-danger",s='<i class="far fa-times-circle"></i> Cover letter should only have a maximum length of 1500 characters.',show_form_alert(a,s)):chrome.storage.sync.set({coverLetter:t.val(),convertURLtoLinks:r.prop("checked"),removeBanners:o.prop("checked")},function(){a="alert alert-success",s='<i class="far fa-check-circle"></i> Your settings has beend saved!',show_form_alert(a,s)}),$("html, body").animate({scrollTop:0},0)})});